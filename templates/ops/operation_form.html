{% extends "base.html" %}
{% block title %}{{ page_title|default:"Opération · C.K.F.R" }}{% endblock %}
{% block body %}
<div class="max-w-3xl mx-auto p-4 sm:p-6 space-y-6">
  <header class="flex items-center justify-between">
    <h1 class="text-3xl font-semibold">{{ heading|default:"Opération" }}</h1>
    <a href="{% url 'operations_manage' %}" class="text-sm text-white/60 hover:text-white/90">↩ Retour</a>
  </header>

  <form method="post" class="space-y-5 rounded-2xl border border-white/10 bg-white/5 p-6">
    {% csrf_token %}
    {% if form.non_field_errors %}
    <div class="rounded-lg border border-red-500/50 bg-red-500/10 p-3 text-sm text-red-200 space-y-1">
      {% for error in form.non_field_errors %}<p>{{ error }}</p>{% endfor %}
    </div>
    {% endif %}

    <div class="space-y-1">
      <label class="block text-sm text-white/70" for="{{ form.title.id_for_label }}">Nom de l’opération</label>
      {{ form.title }}
      {% if form.title.errors %}
      <p class="text-sm text-red-300">{{ form.title.errors|join:', ' }}</p>
      {% endif %}
    </div>

    <div class="space-y-1">
      <label class="block text-sm text-white/70" for="{{ form.description.id_for_label }}">Description</label>
      {{ form.description }}
      {% if form.description.errors %}
      <p class="text-sm text-red-300">{{ form.description.errors|join:', ' }}</p>
      {% endif %}
    </div>

    <div class="grid gap-4 sm:grid-cols-2">
      <div class="space-y-1">
        <label class="block text-sm text-white/70" for="{{ form.highlighted_ship.id_for_label }}">Vaisseau mis en avant</label>
        {{ form.highlighted_ship }}
        {% if form.highlighted_ship.errors %}
        <p class="text-sm text-red-300">{{ form.highlighted_ship.errors|join:', ' }}</p>
        {% endif %}
      </div>
      <div class="flex items-center gap-3 pt-6">
        {{ form.is_active }}
        <label class="text-sm text-white/70" for="{{ form.is_active.id_for_label }}">Définir comme opération active</label>
      </div>
      {% if form.is_active.errors %}
      <p class="text-sm text-red-300 sm:col-span-2">{{ form.is_active.errors|join:', ' }}</p>
      {% endif %}
    </div>

    <div class="flex justify-end gap-2">
      <a href="{% url 'operations_manage' %}" class="rounded-lg border border-white/20 px-4 py-2 text-sm hover:bg-white/10">Annuler</a>
      <button type="submit" class="rounded-lg bg-indigo-600 hover:bg-indigo-500 px-4 py-2 text-sm font-medium">{{ submit_label|default:"Enregistrer" }}</button>
    </div>
  </form>
</div>
{% endblock %}